@page "/bookchapter"

@using MyHebrewBible.Client.State
@using MyHebrewBible.Client.Layout

@using MyHebrewBible.Client.Features.BookChapter.Toolbar
@using MyHebrewBible.Client.Features.BookChapter.Verses


@inject IBookChapterState? bookChapterState

<div class="@GlobalEnums.MediaQuery.Xs.DivClass">
	<Navbar CurrentBookAndChapter="CurrentBookAndChapter"
					OnBookAndChapterSelected="ReturnedBookAndChapter" 
					MediaQuery="GlobalEnums.MediaQuery.Xs" />
</div>
<div class="@GlobalEnums.MediaQuery.Sm.DivClass">
	<Navbar CurrentBookAndChapter="CurrentBookAndChapter"
					OnBookAndChapterSelected="ReturnedBookAndChapter"
					MediaQuery="GlobalEnums.MediaQuery.Sm" />
</div>
<div class="@GlobalEnums.MediaQuery.Md.DivClass">
	<Navbar CurrentBookAndChapter="CurrentBookAndChapter"
					OnBookAndChapterSelected="ReturnedBookAndChapter"
					MediaQuery="GlobalEnums.MediaQuery.Md" />
</div>
<div class="@GlobalEnums.MediaQuery.Lg.DivClass">
	<Navbar CurrentBookAndChapter="CurrentBookAndChapter"
					OnBookAndChapterSelected="ReturnedBookAndChapter"
					MediaQuery="GlobalEnums.MediaQuery.Lg" />
</div>
<div class="@GlobalEnums.MediaQuery.Xl.DivClass">
	<Navbar CurrentBookAndChapter="CurrentBookAndChapter"
					OnBookAndChapterSelected="ReturnedBookAndChapter"
					MediaQuery="GlobalEnums.MediaQuery.Xl" />
</div>

<div class="mt-5">
	<br />
	<Sections BookAndChapter="CurrentBookAndChapter" />
</div>

<AlephBetFooter MediaQuery="Enums.MediaQuery.Md" />  @*	ToDo: Not dynamic *@

@code {
	public BookAndChapter? CurrentBookAndChapter { get; set; }

	protected override void OnInitialized()
	{
		BibleBookIdAndChapter bibleBookIdAndChapter = bookChapterState!.Get();
		CurrentBookAndChapter = new BookAndChapter(Enums.BibleBook.FromValue(bibleBookIdAndChapter.BibleBookId), bibleBookIdAndChapter.Chapter);
	}

	private void ReturnedBookAndChapter(BookAndChapter bookAndChapter)
	{
		CurrentBookAndChapter = bookAndChapter!;
		bookChapterState!.Update(new State.BibleBookIdAndChapter(CurrentBookAndChapter.BibleBook!.Value, CurrentBookAndChapter.Chapter));
	}
}

